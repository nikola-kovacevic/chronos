"use strict";var history_1=require("./classes/history"),constants_1=require("./utils/constants"),Chronos=function(){function t(t){return this.chronos=new history_1.History(t),new Proxy(this,constants_1.chronicle)}return t.prototype.undo=function(){var t=Object.assign({},this);delete t.chronos;var o=this.chronos.goBack(t);return o&&this.setState(o),o},t.prototype.redo=function(){var t=this.chronos.goForward();return t&&this.setState(t),t},t.prototype.enable=function(){this.chronos.enable()},t.prototype.disable=function(){this.chronos.disable()},t.prototype.setState=function(o){var s=this;this.chronos.cacheHistory(),Object.keys(this).forEach(function(t){return t in o||"chronos"===t?null:delete s[t]}),Object.assign(this,o),this.chronos.restoreHistory()},t}();module.exports=Chronos;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImhpc3RvcnlfMSIsInJlcXVpcmUiLCJjb25zdGFudHNfMSIsIkNocm9ub3MiLCJlbmFibGVkIiwidGhpcyIsImNocm9ub3MiLCJIaXN0b3J5IiwiUHJveHkiLCJjaHJvbmljbGUiLCJwcm90b3R5cGUiLCJ1bmRvIiwiY3VycmVudCIsIk9iamVjdCIsImFzc2lnbiIsInN0YXRlIiwiZ29CYWNrIiwic2V0U3RhdGUiLCJyZWRvIiwiZ29Gb3J3YXJkIiwiZW5hYmxlIiwiZGlzYWJsZSIsIl90aGlzIiwiY2FjaGVIaXN0b3J5Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJyZXN0b3JlSGlzdG9yeSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJhQUFBLElBQUFBLFVBQUFDLFFBQUEscUJBRUFDLFlBQUFELFFBQUEscUJBRUFFLFFBQUEsV0FHRSxTQUFBQSxFQUFZQyxHQUVWLE9BREFDLEtBQUtDLFFBQVUsSUFBSU4sVUFBQU8sUUFBUUgsR0FDcEIsSUFBSUksTUFBTUgsS0FBTUgsWUFBQU8sV0F3RTNCLE9BL0RTTixFQUFBTyxVQUFBQyxLQUFQLFdBQ0UsSUFBTUMsRUFBVUMsT0FBT0MsT0FBTyxHQUFJVCxhQUMzQk8sRUFBUU4sUUFFZixJQUFNUyxFQUFRVixLQUFLQyxRQUFRVSxPQUFPSixHQUtsQyxPQUpJRyxHQUNGVixLQUFLWSxTQUFTRixHQUdUQSxHQVNGWixFQUFBTyxVQUFBUSxLQUFQLFdBQ0UsSUFBTUgsRUFBUVYsS0FBS0MsUUFBUWEsWUFLM0IsT0FKSUosR0FDRlYsS0FBS1ksU0FBU0YsR0FHVEEsR0FTRlosRUFBQU8sVUFBQVUsT0FBUCxXQUNFZixLQUFLQyxRQUFRYyxVQVNSakIsRUFBQU8sVUFBQVcsUUFBUCxXQUNFaEIsS0FBS0MsUUFBUWUsV0FVUGxCLEVBQUFPLFVBQUFPLFNBQVIsU0FBaUJGLEdBQWpCLElBQUFPLEVBQUFqQixLQUNFQSxLQUFLQyxRQUFRaUIsZUFFYlYsT0FBT1csS0FBS25CLE1BQ1RvQixRQUFRLFNBQUFDLEdBQU8sT0FBR0EsS0FBT1gsR0FBa0IsWUFBUlcsRUFBd0MsWUFBWkosRUFBS0ksS0FDdkViLE9BQU9DLE9BQU9ULEtBQU1VLEdBRXBCVixLQUFLQyxRQUFRcUIsa0JBRWpCeEIsRUE3RUEsR0ErRUF5QixPQUFBQyxRQUFTMUIiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIaXN0b3J5IH0gZnJvbSAnLi9jbGFzc2VzL2hpc3RvcnknO1xyXG5cclxuaW1wb3J0IHsgY2hyb25pY2xlIH0gZnJvbSAnLi91dGlscy9jb25zdGFudHMnO1xyXG5cclxuY2xhc3MgQ2hyb25vcyB7XHJcbiAgcHJpdmF0ZSBjaHJvbm9zOiBIaXN0b3J5O1xyXG5cclxuICBjb25zdHJ1Y3RvcihlbmFibGVkOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmNocm9ub3MgPSBuZXcgSGlzdG9yeShlbmFibGVkKTtcclxuICAgIHJldHVybiBuZXcgUHJveHkodGhpcywgY2hyb25pY2xlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHVuZG8gLSBnb2VzIG9uZSBzdGVwIGJhY2sgaW4gaGlzdG9yeVxyXG4gICAqIEBmdW5jdGlvblxyXG4gICAqIEByZXR1cm4ge3ZvaWR9IHZvaWRcclxuICAgKiBAZXhhbXBsZSB1bmRvKClcclxuICAgKi9cclxuICBwdWJsaWMgdW5kbygpIHtcclxuICAgIGNvbnN0IGN1cnJlbnQgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzKTtcclxuICAgIGRlbGV0ZSBjdXJyZW50LmNocm9ub3M7XHJcblxyXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLmNocm9ub3MuZ29CYWNrKGN1cnJlbnQpO1xyXG4gICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzdGF0ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHJlZG8gLSByZXZlcnRzIHVuZG8gYWN0aW9uXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHJldHVybiB7dm9pZH0gdm9pZFxyXG4gICAqIEBleGFtcGxlIHJlZG8oKVxyXG4gICAqL1xyXG4gIHB1YmxpYyByZWRvKCkge1xyXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLmNocm9ub3MuZ29Gb3J3YXJkKCk7XHJcbiAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN0YXRlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZW5hYmxlIC0gZW5hYmxlcyBDaHJvbm9zXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHJldHVybiB7dm9pZH0gdm9pZFxyXG4gICAqIEBleGFtcGxlIGVuYWJsZSgpXHJcbiAgICovXHJcbiAgcHVibGljIGVuYWJsZSgpIHtcclxuICAgIHRoaXMuY2hyb25vcy5lbmFibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGRpc2FibGUgLSBkaXNhYmxlcyBDaHJvbm9zXHJcbiAgICogQGZ1bmN0aW9uXHJcbiAgICogQHJldHVybiB7dm9pZH0gdm9pZFxyXG4gICAqIEBleGFtcGxlIGRpc2FibGUoKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBkaXNhYmxlKCkge1xyXG4gICAgdGhpcy5jaHJvbm9zLmRpc2FibGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHNldFN0YXRlIC0gc2V0cyBzdGF0ZSBpbnRvIENocm9ub3NcclxuICAgKiBAZnVuY3Rpb25cclxuICAgKiBAcHJvcGVydHkge2FueX0gc3RhdGUgLSBzdGF0ZSB5b3Ugd2FudCB0byBzZXRcclxuICAgKiBAcmV0dXJuIHt2b2lkfSB2b2lkXHJcbiAgICogQGV4YW1wbGUgc2V0U3RhdGUoe2E6IDEsIGI6IDJ9KVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0U3RhdGUoc3RhdGU6IGFueSkge1xyXG4gICAgdGhpcy5jaHJvbm9zLmNhY2hlSGlzdG9yeSgpO1xyXG5cclxuICAgIE9iamVjdC5rZXlzKHRoaXMpXHJcbiAgICAgIC5mb3JFYWNoKGtleSA9PiAoIShrZXkgaW4gc3RhdGUpICYmIGtleSAhPT0gJ2Nocm9ub3MnKSA/IGRlbGV0ZSB0aGlzW2tleV0gOiBudWxsKTtcclxuICAgIE9iamVjdC5hc3NpZ24odGhpcywgc3RhdGUpO1xyXG5cclxuICAgIHRoaXMuY2hyb25vcy5yZXN0b3JlSGlzdG9yeSgpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0ID0gQ2hyb25vczsiXX0=
